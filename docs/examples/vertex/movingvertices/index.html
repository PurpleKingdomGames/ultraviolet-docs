<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Moving Vertices</title>
  
  
  <meta name="description" content="Scala 3 to GLSL transpiler"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="icon-link glyph-link" href="../../../documentation/"><i class="icofont-laika home" title="Home">&#xef47;</i></a>

  <div class="row links">
    
    <a class="button-link" href="https://ultraviolet.indigoengine.io/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://ultraviolet.indigoengine.io/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Ultraviolet</a></li>
    <li class="level2 nav-leaf"><a href="../../../documentation/shaders-and-glsl.html">Shaders and GLSL</a></li>
    <li class="level2 nav-leaf"><a href="../../../documentation/motivation.html">Motivation</a></li>
    <li class="level2 nav-node"><a href="../../../documentation/guide/">Writing Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/scala-vs-glsl.html">Scala 3 vs GLSL</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/premultiplied-alpha.html">Premultiplied Alpha</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/gotchas.html">Gotcha&#39;s, foot guns, and weird stuff</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/shadertoy.html">Shadertoy</a></li>
    <li class="level1 nav-node"><a href="../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../fragment/">Fragment</a></li>
    <li class="level3 nav-node"><a href="../../fragment/basics/">Basics</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colour-constants/">Colour Constants</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colour-interpolators/">Colour Interpolators</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colours/">Colours</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/minimal/">Minimal Fragment Shader Setup</a></li>
    <li class="level3 nav-node"><a href="../../fragment/demos/">Demos</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/campfire/">Campfire Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/glowing-star/">Glowing Star Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/pulsingbox/">Pulsing Box Demo</a></li>
    <li class="level3 nav-node"><a href="../../fragment/noise/">Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/cellular-noise/">Cellular Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/classic-perlin-noise/">Classic Perlin Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/gradient-noise/">Gradient Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/simplex-noise/">Simplex Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/white-noise/">White Noise</a></li>
    <li class="level3 nav-node"><a href="../../fragment/patterns/">Patterns</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/grid/">Grid</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/rainbow/">Rainbow</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/simple-voronoi/">Voronoi Example</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/stripes/">Stripes</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/wavy-stripes/">Wavy stripes</a></li>
    <li class="level3 nav-node"><a href="../../fragment/sdf/">Sdf</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/box/">Square SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/circle/">Circle SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/hexagon/">Hexagon SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/segment/">Segment SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/star/">Star SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/triangle/">Triangle SDF</a></li>
    <li class="level3 nav-node"><a href="../../fragment/shapes/">Shapes</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/shapes/doughnut/">Doughnut</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/shapes/metaballs/">Metaballs</a></li>
    <li class="level3 nav-node"><a href="../../fragment/textures/">Textures</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/basic-texture-use/">Basic texture use</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/blending-textures/">Blending Textures</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/specifying-texture-coords/">Specifying Texture Coordinates</a></li>
    <li class="level2 nav-node"><a href="../../language-features/">Language features</a></li>
    <li class="level3 nav-leaf"><a href="../../language-features/imports/">Using Imports &amp; Shared Code</a></li>
    <li class="level3 nav-leaf"><a href="../../language-features/ubos/">Supplying Data with UBOs</a></li>
    <li class="level2 nav-node"><a href="../">Vertex</a></li>
    <li class="level3 nav-leaf"><a href="../manipulatinguvs/">Manipulating UVs</a></li>
    <li class="level3 nav-leaf"><a href="../minimal/">Minimal Vertex Shader Setup</a></li>
    <li class="level3 active nav-leaf"><a href="#">Moving Vertices</a></li>
    <li class="level1 nav-node"><a href="../../../shadertoy/">Shadertoy</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/default/">Default</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/plasma/">Plasma</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/seascape/">Seascape</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Moving Vertices</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#demo">Demo</a></li>
    <li class="level1 nav-leaf"><a href="#links">Links</a></li>
    <li class="level1 nav-leaf"><a href="#how-to-move-vertices-in-a-vertex-shader">How to move vertices in a vertex shader</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="moving-vertices" class="title">Moving Vertices</h1>
        <p>3D graphics hardware works by rendering triangles to the screen. In 2D graphics, a rectangular region on the screen is made up of two triangles, known as a quad. At the corners of those triangles are the vertices. A quad has four vertices (a, b, c, and d) that the two triangles share, as follows:</p>
        <pre><code>a___d
|\  |
| \ |
|__\|
b   c</code></pre>
        <p>Generally speaking, it isn&#39;t necessary to manually shift these vertices into the right place. Indigo will take care of this for you, based on the settings you provide for your entity, like its position, scale and rotation.</p>
        <p>That said, sometimes it is necessary or interesting to do so. Perhaps to make an entity wobble or skew.</p>
        <p>To do that, we need to provide a vertex shader program that tells Indigo how to adjust the position of each vertex.</p>
        
        <h2 id="demo" class="section"><a class="anchor-link left" href="#demo"><i class="icofont-laika link">&#xef71;</i></a>Demo</h2>
        <div id="live-demo" style="border:2px solid #e400ff;width:400px;height:400px;background:#a888db33;color: #e400ff;display:flex;align-items:center;justify-content:center;cursor:pointer;">
          â–¶  Click to play
        </div>
        <script>
  document.getElementById("live-demo").addEventListener("click", function() {
    this.innerHTML = '<iframe width="396" height="396" src="https://ultraviolet.indigoengine.io/live_demos/examples/vertex/movingvertices/index.html" frameborder="0" allow="autoplay; encrypted-media" scrolling="no"></iframe>';
  });
</script>
        
        <h2 id="links" class="section"><a class="anchor-link left" href="#links"><i class="icofont-laika link">&#xef71;</i></a>Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/ultraviolet-docs/blob/main/examples/vertex/movingvertices">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://ultraviolet.indigoengine.io/live_demos/examples/vertex/movingvertices/index.html">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-move-vertices-in-a-vertex-shader" class="section"><a class="anchor-link left" href="#how-to-move-vertices-in-a-vertex-shader"><i class="icofont-laika link">&#xef71;</i></a>How to move vertices in a vertex shader</h2>
        <p>We need to define a shader that takes both the usual fragment shader, and also a vertex
        shader. In this case we pass in the default environment to both.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">shader</span><span>: </span><span class="type-name">ShaderProgram</span><span> =
  </span><span class="type-name">UltravioletShader</span><span>(
    </span><span class="type-name">ShaderId</span><span>(</span><span class="string-literal">&quot;shader&quot;</span><span>),
    </span><span class="type-name">EntityShader</span><span>.</span><span class="identifier">vertex</span><span>[</span><span class="type-name">VertexEnv</span><span>](</span><span class="identifier">vertex</span><span>, </span><span class="type-name">VertexEnv</span><span>.</span><span class="identifier">reference</span><span>),
    </span><span class="type-name">EntityShader</span><span>.</span><span class="identifier">fragment</span><span>[</span><span class="type-name">FragmentEnv</span><span>](</span><span class="identifier">fragment</span><span>, </span><span class="type-name">FragmentEnv</span><span>.</span><span class="identifier">reference</span><span>)
  )</span></code></pre>
        <p>A vertex shader is just a function that takes a vec4 of the current vertex position, and
        returns a new vec4 of the manipulated vertex position.</p>
        <p>In this example, we calculate an angle based on the current time, and then shift the current
        vertex by that angle.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">vertex</span><span>: </span><span class="type-name">Shader</span><span>[</span><span class="type-name">VertexEnv</span><span>, </span><span class="type-name">Unit</span><span>] =
  </span><span class="type-name">Shader</span><span>[</span><span class="type-name">VertexEnv</span><span>] { </span><span class="identifier">env</span><span> =&gt;
    </span><span class="keyword">def</span><span> </span><span class="declaration-name">vertex</span><span>(</span><span class="identifier">v</span><span>: </span><span class="identifier">vec4</span><span>): </span><span class="identifier">vec4</span><span> =
      </span><span class="keyword">val</span><span> </span><span class="identifier">angle</span><span> = </span><span class="identifier">env</span><span>.</span><span class="type-name">TAU</span><span> * (</span><span class="identifier">env</span><span>.</span><span class="type-name">TIME</span><span> % </span><span class="number-literal">1.0f</span><span>)

      </span><span class="identifier">v</span><span> + </span><span class="identifier">vec4</span><span>(
        </span><span class="identifier">vec2</span><span>(</span><span class="identifier">sin</span><span>(</span><span class="identifier">angle</span><span>) * </span><span class="number-literal">0.2f</span><span>, </span><span class="identifier">cos</span><span>(</span><span class="identifier">angle</span><span>) * </span><span class="number-literal">0.2f</span><span>),
        </span><span class="identifier">vec2</span><span>(</span><span class="number-literal">0.0f</span><span>)
      )
  }</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>