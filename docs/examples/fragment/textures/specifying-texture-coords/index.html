<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Specifying Texture Coordinates</title>
  
  
  <meta name="description" content="Scala 3 to GLSL transpiler"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../../css/custom.css" />
  <script src="../../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="icon-link glyph-link" href="../../../../documentation/"><i class="icofont-laika home" title="Home">&#xef47;</i></a>

  <div class="row links">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/ultraviolet-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://purplekingdomgames.github.io/ultraviolet-docs/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../../documentation/">Ultraviolet</a></li>
    <li class="level2 nav-leaf"><a href="../../../../documentation/shaders-and-glsl.html">Shaders and GLSL</a></li>
    <li class="level2 nav-leaf"><a href="../../../../documentation/motivation.html">Motivation</a></li>
    <li class="level2 nav-node"><a href="../../../../documentation/guide/">Writing Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../../../documentation/guide/scala-vs-glsl.html">Scala 3 vs GLSL</a></li>
    <li class="level3 nav-leaf"><a href="../../../../documentation/guide/premultiplied-alpha.html">Premultiplied Alpha</a></li>
    <li class="level3 nav-leaf"><a href="../../../../documentation/guide/gotchas.html">Gotcha&#39;s, foot guns, and weird stuff</a></li>
    <li class="level3 nav-leaf"><a href="../../../../documentation/guide/shadertoy.html">Shadertoy</a></li>
    <li class="level1 nav-node"><a href="../../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../">Fragment</a></li>
    <li class="level3 nav-node"><a href="../../basics/">Basics</a></li>
    <li class="level4 nav-leaf"><a href="../../basics/colour-constants/">Colour Constants</a></li>
    <li class="level4 nav-leaf"><a href="../../basics/colour-interpolators/">Colour Interpolators</a></li>
    <li class="level4 nav-leaf"><a href="../../basics/colours/">Colours</a></li>
    <li class="level4 nav-leaf"><a href="../../basics/minimal/">Minimal Fragment Shader Setup</a></li>
    <li class="level3 nav-node"><a href="../../demos/">Demos</a></li>
    <li class="level4 nav-leaf"><a href="../../demos/campfire/">Campfire Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../demos/glowing-star/">Glowing Star Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../demos/pulsingbox/">Pulsing Box Demo</a></li>
    <li class="level3 nav-node"><a href="../../noise/">Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../noise/cellular-noise/">Cellular Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../noise/classic-perlin-noise/">Classic Perlin Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../noise/gradient-noise/">Gradient Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../noise/simplex-noise/">Simplex Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../noise/white-noise/">White Noise</a></li>
    <li class="level3 nav-node"><a href="../../patterns/">Patterns</a></li>
    <li class="level4 nav-leaf"><a href="../../patterns/grid/">Grid</a></li>
    <li class="level4 nav-leaf"><a href="../../patterns/rainbow/">Rainbow</a></li>
    <li class="level4 nav-leaf"><a href="../../patterns/simple-voronoi/">Voronoi Example</a></li>
    <li class="level4 nav-leaf"><a href="../../patterns/stripes/">Stripes</a></li>
    <li class="level4 nav-leaf"><a href="../../patterns/wavy-stripes/">Wavy stripes</a></li>
    <li class="level3 nav-node"><a href="../../sdf/">Sdf</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/box/">Square SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/circle/">Circle SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/hexagon/">Hexagon SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/segment/">Segment SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/star/">Star SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../sdf/triangle/">Triangle SDF</a></li>
    <li class="level3 nav-node"><a href="../../shapes/">Shapes</a></li>
    <li class="level4 nav-leaf"><a href="../../shapes/doughnut/">Doughnut</a></li>
    <li class="level4 nav-leaf"><a href="../../shapes/metaballs/">Metaballs</a></li>
    <li class="level3 nav-node"><a href="../">Textures</a></li>
    <li class="level4 nav-leaf"><a href="../basic-texture-use/">Basic texture use</a></li>
    <li class="level4 nav-leaf"><a href="../blending-textures/">Blending Textures</a></li>
    <li class="level4 active nav-leaf"><a href="#">Specifying Texture Coordinates</a></li>
    <li class="level2 nav-node"><a href="../../../language-features/">Language-features</a></li>
    <li class="level3 nav-leaf"><a href="../../../language-features/imports/">Using Imports &amp; Shared Code</a></li>
    <li class="level3 nav-leaf"><a href="../../../language-features/ubos/">Supplying Data with UBOs</a></li>
    <li class="level2 nav-node"><a href="../../../vertex/">Vertex</a></li>
    <li class="level3 nav-leaf"><a href="../../../vertex/manipulatinguvs/">Manipulating UVs</a></li>
    <li class="level3 nav-leaf"><a href="../../../vertex/minimal/">Minimal Vertex Shader Setup</a></li>
    <li class="level3 nav-leaf"><a href="../../../vertex/movingvertices/">Moving Vertices</a></li>
    <li class="level1 nav-node"><a href="../../../../shadertoy/">Shadertoy</a></li>
    <li class="level2 nav-leaf"><a href="../../../../shadertoy/default/">Default</a></li>
    <li class="level2 nav-leaf"><a href="../../../../shadertoy/plasma/">Plasma</a></li>
    <li class="level2 nav-leaf"><a href="../../../../shadertoy/seascape/">Seascape</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Specifying Texture Coordinates</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#example-links">Example Links</a></li>
    <li class="level1 nav-node"><a href="#stretching-a-texture-to-fill-the-entity">Stretching a texture to fill the entity.</a></li>
    <li class="level2 nav-leaf"><a href="#how-indigo-stores-texture-information">How Indigo stores texture information</a></li>
    <li class="level2 nav-leaf"><a href="#using-texture2d">Using <code>texture2D</code></a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="specifying-texture-coordinates" class="title">Specifying Texture Coordinates</h1>
        <p>Normally you read the pixel value of your first texture by simply referencing <code>env.CHANNEL_0</code>, and you are done.</p>
        <p>In Indigo proper, <code>CHANNEL_0</code> is carefully constructed to ensure that the texture coordinate read adheres to the fill type specified in Indigo, based on the UV coordinates passed to the fragment shader from the vertex shader.</p>
        <p>There are times, though, when you want to be able to control the texture coordinates directly. Maybe you only want to render a sub region of a texture, for example. Let&#39;s explore an example.</p>
        
        <h2 id="example-links" class="section"><a class="anchor-link left" href="#example-links"><i class="icofont-laika link">&#xef71;</i></a>Example Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/ultraviolet-docs/blob/main/examples/fragment/textures/specifying-texture-coords">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://purplekingdomgames.github.io/ultraviolet-docs//live_demos/examples/fragment/textures/specifying-texture-coords/">Live demo</a></li>
        </ul>
        
        <h2 id="stretching-a-texture-to-fill-the-entity" class="section"><a class="anchor-link left" href="#stretching-a-texture-to-fill-the-entity"><i class="icofont-laika link">&#xef71;</i></a>Stretching a texture to fill the entity.</h2>
        <p>In this example we&#39;re going to mimic Indigo&#39;s &#39;stretch&#39; <code>FillType</code>, to tell the shader to
        stretch the texture to fill the entity (or in our case, the available space), by telling the
        shader how to map the entities UV&#39;s onto the texture.</p>
        <p>Fundamentally, we&#39;re just going to look at using the <code>texture2D</code> function in a shader, and if
        you are using Ultraviolet outside of Indigo, that&#39;s all you really need.</p>
        <p>Since we are in Indigo though, things are slightly more complex because we are required to know
        a bit about how Indigo works with textures.</p>
        
        <h3 id="how-indigo-stores-texture-information" class="section"><a class="anchor-link left" href="#how-indigo-stores-texture-information"><i class="icofont-laika link">&#xef71;</i></a>How Indigo stores texture information</h3>
        <p>Briefly: Indigo stores textures on a texture atlas. Which means that many texture are all stored
        in the same image / texture buffer, which can then be accessed repeatedly without requiring a
        context change by the graphics card.</p>
        <p>Indigo can have many atlases, which are limited to 4096x4096 pixels in size, but in pixel art
        terms that&#39;s a lot of space! It&#39;s common for whole games to easily fit in one atlas.</p>
        <p>What does that mean in practice? Well it means that when you want to make use of a texture in
        the <code>SRC_CHANNEL</code> - the enourmous texture atlas - you need to know where in that atlas your
        texture is, and how big it is. For channel 0, those values are <code>CHANNEL_0_POSITION</code> and
        <code>CHANNEL_0_SIZE</code>, respectively.</p>
        
        <h3 id="using-texture2d" class="section"><a class="anchor-link left" href="#using-texture2d"><i class="icofont-laika link">&#xef71;</i></a>Using <code>texture2D</code></h3>
        <blockquote>Trivia: The function <code>texture2D()</code> comes from WebGL 1.0, in WebGL 2.0 it&#39;s just called
        <code>texture()</code>, but it was convenient to keep the old terminology to help disambiguate terms, and
        Ultraviolet translates it to the right name for you based on the compilation target.</blockquote>
        <p>As usual, we need to first assign a texture to a channel.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">channel0</span><span>: </span><span class="type-name">Option</span><span>[</span><span class="type-name">AssetPath</span><span>] = </span><span class="type-name">Option</span><span>(</span><span class="type-name">AssetPath</span><span>(</span><span class="string-literal">&quot;assets/fire-background.png&quot;</span><span>))</span></code></pre>
        <p>Now we can render our stretched texture.</p>
        <p>First we need to calculate the stretched UV coordinates. We do this by taking the
        entity&#39;s UV value passed over by the vertex shader; multiply it by the texture size so
        that we have translated from UV space (0.0 to 1.0) to pixels; then add the position of
        the texture in the atlas to move to the correct location.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">coords</span><span> = </span><span class="identifier">env</span><span>.</span><span class="type-name">CHANNEL_0_POSITION</span><span> + (</span><span class="identifier">env</span><span>.</span><span class="type-name">UV</span><span> * </span><span class="identifier">env</span><span>.</span><span class="type-name">CHANNEL_0_SIZE</span><span>)</span></code></pre>
        <p>Finally, we can sample the texture at the calculated coordinates. <code>texture2D</code> returns a
        <code>vec4</code> of the color of the texture at the given coordinates.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">texture2D</span><span>(</span><span class="identifier">env</span><span>.</span><span class="type-name">SRC_CHANNEL</span><span>, </span><span class="identifier">coords</span><span>)</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>