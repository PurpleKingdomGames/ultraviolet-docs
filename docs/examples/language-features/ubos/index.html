<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Supplying Data with UBOs</title>
  
  
  <meta name="description" content="Scala 3 to GLSL transpiler"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../../img/favicon.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../helium/site/laika-helium.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/custom.css" />
  <script src="../../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="icon-link glyph-link" href="../../../documentation/"><i class="icofont-laika home" title="Home">&#xef47;</i></a>

  <div class="row links">
    
    <a class="button-link" href="https://ultraviolet.indigoengine.io/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="button-link" href="https://ultraviolet.indigoengine.io/live_demos">Live Demos</a>
    
    <a class="button-link" href="https://discord.gg/b5CD47g">Discord</a>
    
    <a class="button-link" href="https://github.com/PurpleKingdomGames/ultraviolet">Github</a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="../../../documentation/">Ultraviolet</a></li>
    <li class="level2 nav-leaf"><a href="../../../documentation/shaders-and-glsl.html">Shaders and GLSL</a></li>
    <li class="level2 nav-leaf"><a href="../../../documentation/motivation.html">Motivation</a></li>
    <li class="level2 nav-node"><a href="../../../documentation/guide/">Writing Shaders</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/scala-vs-glsl.html">Scala 3 vs GLSL</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/premultiplied-alpha.html">Premultiplied Alpha</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/gotchas.html">Gotcha&#39;s, foot guns, and weird stuff</a></li>
    <li class="level3 nav-leaf"><a href="../../../documentation/guide/shadertoy.html">Shadertoy</a></li>
    <li class="level1 nav-node"><a href="../../">Examples</a></li>
    <li class="level2 nav-node"><a href="../../fragment/">Fragment</a></li>
    <li class="level3 nav-node"><a href="../../fragment/basics/">Basics</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colour-constants/">Colour Constants</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colour-interpolators/">Colour Interpolators</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/colours/">Colours</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/basics/minimal/">Minimal Fragment Shader Setup</a></li>
    <li class="level3 nav-node"><a href="../../fragment/demos/">Demos</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/campfire/">Campfire Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/glowing-star/">Glowing Star Demo</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/demos/pulsingbox/">Pulsing Box Demo</a></li>
    <li class="level3 nav-node"><a href="../../fragment/noise/">Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/cellular-noise/">Cellular Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/classic-perlin-noise/">Classic Perlin Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/gradient-noise/">Gradient Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/simplex-noise/">Simplex Noise</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/noise/white-noise/">White Noise</a></li>
    <li class="level3 nav-node"><a href="../../fragment/patterns/">Patterns</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/grid/">Grid</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/rainbow/">Rainbow</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/simple-voronoi/">Voronoi Example</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/stripes/">Stripes</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/patterns/wavy-stripes/">Wavy stripes</a></li>
    <li class="level3 nav-node"><a href="../../fragment/sdf/">Sdf</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/box/">Square SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/circle/">Circle SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/hexagon/">Hexagon SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/segment/">Segment SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/star/">Star SDF</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/sdf/triangle/">Triangle SDF</a></li>
    <li class="level3 nav-node"><a href="../../fragment/shapes/">Shapes</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/shapes/doughnut/">Doughnut</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/shapes/metaballs/">Metaballs</a></li>
    <li class="level3 nav-node"><a href="../../fragment/textures/">Textures</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/basic-texture-use/">Basic texture use</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/blending-textures/">Blending Textures</a></li>
    <li class="level4 nav-leaf"><a href="../../fragment/textures/specifying-texture-coords/">Specifying Texture Coordinates</a></li>
    <li class="level2 nav-node"><a href="../">Language features</a></li>
    <li class="level3 nav-leaf"><a href="../imports/">Using Imports &amp; Shared Code</a></li>
    <li class="level3 active nav-leaf"><a href="#">Supplying Data with UBOs</a></li>
    <li class="level2 nav-node"><a href="../../vertex/">Vertex</a></li>
    <li class="level3 nav-leaf"><a href="../../vertex/manipulatinguvs/">Manipulating UVs</a></li>
    <li class="level3 nav-leaf"><a href="../../vertex/minimal/">Minimal Vertex Shader Setup</a></li>
    <li class="level3 nav-leaf"><a href="../../vertex/movingvertices/">Moving Vertices</a></li>
    <li class="level1 nav-node"><a href="../../../shadertoy/">Shadertoy</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/default/">Default</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/plasma/">Plasma</a></li>
    <li class="level2 nav-leaf"><a href="../../../shadertoy/seascape/">Seascape</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Supplying Data with UBOs</a></p>

  <ul class="nav-list">
    <li class="level1 nav-node"><a href="#ubo-data-packing-rules">UBO Data Packing Rules</a></li>
    <li class="level2 nav-leaf"><a href="#_1-reorder-the-fields">1. Reorder the fields</a></li>
    <li class="level2 nav-leaf"><a href="#_2-manually-pack-the-data">2. Manually pack the data</a></li>
    <li class="level2 nav-leaf"><a href="#the-rules">The Rules</a></li>
    <li class="level1 nav-leaf"><a href="#demo">Demo</a></li>
    <li class="level1 nav-leaf"><a href="#links">Links</a></li>
    <li class="level1 nav-node"><a href="#how-to-use-uniform-buffer-objects-ubos-to-supply-data-to-a-shader">How to use Uniform Buffer Objects (UBOs) to supply data to a shader</a></li>
    <li class="level2 nav-leaf"><a href="#creating-the-data-structure">Creating the data structure</a></li>
    <li class="level2 nav-leaf"><a href="#setting-up-the-uniform-block-data">Setting up the uniform block data</a></li>
    <li class="level2 nav-leaf"><a href="#accessing-the-values-via-the-environment">Accessing the values via the environment</a></li>
    <li class="level2 nav-leaf"><a href="#supplying-the-environment">Supplying the environment</a></li>
    <li class="level2 nav-leaf"><a href="#using-the-data">Using the data</a></li>
  </ul>

  <p class="footer"></p>
</nav>


      <main class="content">

        <h1 id="supplying-data-with-ubos" class="title">Supplying Data with UBOs</h1>
        <p>At some point, you&#39;re going to want to be able to supply data to your shader for some reason, for example, perhaps your shader renders planets and you need to give it the color scheme to change water into lava.</p>
        <p>To send data to shaders we use Uniform Buffer Objects (UBOs).</p>
        <p>Ultraviolet allows you to declare UBOs as case classes. It isn&#39;t a perfect set up, but it works.</p>
        
        <h2 id="ubo-data-packing-rules" class="section"><a class="anchor-link left" href="#ubo-data-packing-rules"><i class="icofont-laika link">&#xef71;</i></a>UBO Data Packing Rules</h2>
        <p>Take heed! When you send data to a shader what you&#39;re really doing is sending a series of floats which will be read as a C-like struct at the other end. There are rules about how these floats get packed so that they are correctly read at the other end.</p>
        <p>Full rules follow, but to give you some idea:</p>
        <p>Say you want to send this case class:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">MyData</span><span>(</span><span class="identifier">angle</span><span>: </span><span class="type-name">Float</span><span>, </span><span class="identifier">position</span><span>: </span><span class="identifier">vec3</span><span>, </span><span class="identifier">multiplier</span><span>: </span><span class="type-name">Float</span><span>)</span></code></pre>
        <p>And for simplicity, lets say the values are:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="type-name">MyData</span><span>(</span><span class="number-literal">1.0f</span><span>, </span><span class="identifier">vec3</span><span>(</span><span class="number-literal">2.0f</span><span>, </span><span class="number-literal">3.0f</span><span>, </span><span class="number-literal">4.0f</span><span>), </span><span class="number-literal">5.0f</span><span>)</span></code></pre>
        <p>This will be very inefficiently packed into this:</p>
        <pre><code>1.0,0.0,0.0,0.0,
2.0,3.0,4.0,0.0,
5.0,0.0,0.0,0.0</code></pre>
        <p>Look at all that waste! So many <code>0.0</code>s! Might not be a problem for simple cases, but if you&#39;re trying to send a lot of data within the limits, then you could run into trouble.</p>
        <p>Why does it do this? Well, <code>angle</code> seems good, and we might expect that we can fit position into the remaining three floats after it (i.e. 1.0,&lt;2.0,3.0,4.0&gt;,5.0,0.0,0.0,0.0), but the stride is 16 bytes, and a <code>vec3</code> is treated as a 16 bytes of data, so by default they cannot be merged.</p>
        <p>Better strategies...</p>
        
        <h4 id="_1-reorder-the-fields" class="section"><a class="anchor-link left" href="#_1-reorder-the-fields"><i class="icofont-laika link">&#xef71;</i></a>1. Reorder the fields</h4>
        <p>Move the multiplier:</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">MyData</span><span>(</span><span class="identifier">angle</span><span>: </span><span class="type-name">Float</span><span>, </span><span class="identifier">multiplier</span><span>: </span><span class="type-name">Float</span><span>, </span><span class="identifier">position</span><span>: </span><span class="identifier">vec3</span><span>)
</span><span class="type-name">MyData</span><span>(</span><span class="number-literal">1.0f</span><span>, </span><span class="number-literal">5.0f</span><span>, </span><span class="identifier">vec3</span><span>(</span><span class="number-literal">2.0f</span><span>, </span><span class="number-literal">3.0f</span><span>, </span><span class="number-literal">4.0f</span><span>))</span></code></pre>
        <p>Result:</p>
        <pre><code>1.0,5.0,0.0,0.0,
2.0,3.0,4.0,0.0</code></pre>
        
        <h4 id="_2-manually-pack-the-data" class="section"><a class="anchor-link left" href="#_2-manually-pack-the-data"><i class="icofont-laika link">&#xef71;</i></a>2. Manually pack the data</h4>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">final</span><span> </span><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">MyData</span><span>(</span><span class="identifier">angleAndPosition</span><span>: </span><span class="identifier">vec4</span><span>, </span><span class="identifier">multiplier</span><span>: </span><span class="type-name">Float</span><span>)
</span><span class="type-name">MyData</span><span>(</span><span class="identifier">vec4</span><span>(</span><span class="number-literal">1.0f</span><span>, </span><span class="number-literal">2.0f</span><span>, </span><span class="number-literal">3.0f</span><span>, </span><span class="number-literal">4.0f</span><span>), </span><span class="number-literal">5.0f</span><span>)</span></code></pre>
        <p>Result:</p>
        <pre><code>1.0,2.0,3.0,4.0,
5.0,0.0,0.0,0.0</code></pre>
        
        <h3 id="the-rules" class="section"><a class="anchor-link left" href="#the-rules"><i class="icofont-laika link">&#xef71;</i></a>The Rules</h3>
        <p>These rules have saved me many times and originally came from here: <a href="https://youtu.be/bdIZ2ZloXEA?t=113"><a href="https://youtu.be/bdIZ2ZloXEA?t=113">https://youtu.be/bdIZ2ZloXEA?t=113</a></a></p>
        <pre><code>&quot;UBO - Uniform Buffer Object&quot;

Uses a struct as a way to defined the data in the buffer.
Struct data based on STD140 layout requires data to exist in 16 byte chunks.

Float, Int and Bools are treated as 4 Bytes of Data.

Arrays, no matter the type, each element is 16 Bytes.

vec2, Contains 2 floats so 4*2 bytes of data (8 Bytes)
vec4, Contains 4 floats so 4*4 bytes of data (16 Bytes)
vec3, Must be treated as 16 bytes of data (i.e. a vec4), last 4 bytes are buffer space

mat3, Contains 3 sets of Vec3 BUT each vec3 is treated as vec4, 3*16 Bytes of data
mat4, Contains 4 sets of Vec4, so 4 * 16 Bytes

For EXAMPLE
Float - Float - Vec3 - Float

FF00 VVVV F000

You also can&#39;t straddle byte boundries. So if you&#39;re trying to pack this: Float-Vec2
This is valid: F0VV
But this isn&#39;t: FVV0</code></pre>
        
        <h2 id="demo" class="section"><a class="anchor-link left" href="#demo"><i class="icofont-laika link">&#xef71;</i></a>Demo</h2>
        <div id="live-demo" style="border:2px solid #e400ff;width:400px;height:400px;background:#a888db33;color: #e400ff;display:flex;align-items:center;justify-content:center;cursor:pointer;">
          ▶  Click to play
        </div>
        <script>
  document.getElementById("live-demo").addEventListener("click", function() {
    this.innerHTML = '<iframe width="396" height="396" src="https://ultraviolet.indigoengine.io/live_demos/examples/language-features/ubos/index.html" frameborder="0" allow="autoplay; encrypted-media" scrolling="no"></iframe>';
  });
</script>
        
        <h2 id="links" class="section"><a class="anchor-link left" href="#links"><i class="icofont-laika link">&#xef71;</i></a>Links</h2>
        <ul>
          <li><a href="https://github.com/PurpleKingdomGames/ultraviolet-docs/blob/main/examples/language-features/ubos">View example code</a></li>
        </ul>
        <ul>
          <li><a href="https://ultraviolet.indigoengine.io/live_demos/examples/language-features/ubos/index.html">Live demo</a></li>
        </ul>
        
        <h2 id="how-to-use-uniform-buffer-objects-ubos-to-supply-data-to-a-shader" class="section"><a class="anchor-link left" href="#how-to-use-uniform-buffer-objects-ubos-to-supply-data-to-a-shader"><i class="icofont-laika link">&#xef71;</i></a>How to use Uniform Buffer Objects (UBOs) to supply data to a shader</h2>
        <p>The process of setting up UBOs is a little more involved than setting up a simple shader, and
        there are a few steps to follow. It&#39;s an imperfect arrangement, but works fairly well. Hopefully
        it can be improved in the future.</p>
        <p>This example is built on top of Indigo&#39;s IndigoShader entry point, which allows us to send data
        to the shader by setting the <code>uniformBlocks</code>. Please note that the fields exposed by this entry
        point are the fields on Indigo&#39;s <code>ShaderData</code> type, so when doing this in a real game, you&#39;d
        fill in the details there instead.</p>
        
        <h3 id="creating-the-data-structure" class="section"><a class="anchor-link left" href="#creating-the-data-structure"><i class="icofont-laika link">&#xef71;</i></a>Creating the data structure</h3>
        <p>First we need to define a structure that will be used to define the data that will be passed to
        the shader. In this case, it&#39;s a case class called <code>CustomData</code>.</p>
        <p>Technically, there is <em>no</em> link between the case class used in the shader data, and the case
        class used in the shader itself. However, it&#39;s a good idea to use the same one if you can. It
        may not always be convenient as we&#39;ll see below.</p>
        <p>In order to use one case class to define both the structure sent and how it is defined in the
        shader, we need a case class that is <em>not</em> finalised, so that we can extend it later.</p>
        <p>Notice that the case class derives from <code>ToUniformBlock</code>. This is a type class that allows use
        to automagically convert the case class into a <code>UniformBlock</code>. You can mannually set up uniform
        block data if you prefer, but you&#39;ll still need a case class for the representation in the
        shader code.</p>
        <p>The <code>CUSTOM_COLOR</code> field is a <code>vec4</code> that will represent the RGBA color (a common use of vec4
        types in shaders). The field name has been capitalised since environment fields in Indigo are
        all capitalised by convention, but it isn&#39;t necessary.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">case</span><span> </span><span class="keyword">class</span><span> </span><span class="type-name">CustomData</span><span>(</span><span class="type-name">CUSTOM_COLOR</span><span>: </span><span class="identifier">vec4</span><span>) </span><span class="identifier">derives</span><span> </span><span class="type-name">ToUniformBlock</span></code></pre>
        
        <h3 id="setting-up-the-uniform-block-data" class="section"><a class="anchor-link left" href="#setting-up-the-uniform-block-data"><i class="icofont-laika link">&#xef71;</i></a>Setting up the uniform block data</h3>
        <p>We need to instantiate the data, which is no more complicated that creating an instance of
        <code>CustomData</code>. This works, because our case class is derived from <code>ToUniformBlock</code>, and the
        IndigoShader entry point will perform an implicit conversion for us. The same conversion is
        applied when you add data to an Indigo <code>ShaderData</code> instance.</p>
        <p>Here we&#39;ve set the RGBA color to magenta.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">uniformBlocks</span><span>: </span><span class="type-name">Batch</span><span>[</span><span class="type-name">UniformBlock</span><span>] =
  </span><span class="type-name">Batch</span><span>(
    </span><span class="type-name">CustomData</span><span>(</span><span class="identifier">vec4</span><span>(</span><span class="number-literal">1.0f</span><span>, </span><span class="number-literal">0.0f</span><span>, </span><span class="number-literal">1.0f</span><span>, </span><span class="number-literal">1.0f</span><span>))
  )</span></code></pre>
        
        <h3 id="accessing-the-values-via-the-environment" class="section"><a class="anchor-link left" href="#accessing-the-values-via-the-environment"><i class="icofont-laika link">&#xef71;</i></a>Accessing the values via the environment</h3>
        <p>The <code>CustomData</code> case class is used to define the data that will be passed to the shader, but
        we need to somehow include that in the shader&#39;s environment so that we can access the data in
        the shader.</p>
        <p>The default environment for an Indigo fragment shader is <code>FragmentEnv</code>, which provides access
        to fields like <code>env.TIME</code>. We need all the fields from <code>FragmentEnv</code>, but we also need to
        include the fields of our <code>CustomData</code> case class.</p>
        <p>To do that, we make a new class (called <code>Env</code> here) that extends <code>CustomData</code> and a stub
        version of <code>FragmentEnv</code> called <code>FragmentEnvReference</code>.</p>
        <p>Note that the data used to instantiate <code>CustomData</code> here <em>does not matter</em>, these are just
        placeholder values. The actual data will be supplied by the <code>UniformBlock</code> we set up earlier.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">class</span><span> </span><span class="type-name">Env</span><span> </span><span class="keyword">extends</span><span> </span><span class="type-name">CustomData</span><span>(</span><span class="identifier">vec4</span><span>(</span><span class="number-literal">0.0f</span><span>)) </span><span class="keyword">with</span><span> </span><span class="type-name">FragmentEnvReference</span></code></pre>
        
        <h3 id="supplying-the-environment" class="section"><a class="anchor-link left" href="#supplying-the-environment"><i class="icofont-laika link">&#xef71;</i></a>Supplying the environment</h3>
        <p>The reason we have to set up the <code>Env</code> class is that under the current set up, we need to
        supply an instance of the environment to the shader, as reference data. Here we just give a
        <code>new Env</code> and we&#39;re done.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">val</span><span> </span><span class="identifier">shader</span><span>: </span><span class="type-name">ShaderProgram</span><span> =
  </span><span class="type-name">UltravioletShader</span><span>.</span><span class="identifier">entityFragment</span><span>(
    </span><span class="type-name">ShaderId</span><span>(</span><span class="string-literal">&quot;shader&quot;</span><span>),
    </span><span class="type-name">EntityShader</span><span>.</span><span class="identifier">fragment</span><span>[</span><span class="type-name">Env</span><span>](</span><span class="identifier">fragment</span><span>, </span><span class="keyword">new</span><span> </span><span class="type-name">Env</span><span>)
  )</span></code></pre>
        
        <h3 id="using-the-data" class="section"><a class="anchor-link left" href="#using-the-data"><i class="icofont-laika link">&#xef71;</i></a>Using the data</h3>
        <p>We&#39;re almost ready to use our ubo data in the shader, but first we need to tell Ultraviolet to
        define the UBO structure in the final shader code. We do that by calling <code>ubo[CustomData]</code> at
        the top of the shader body.</p>
        <p>We can now access the <code>CUSTOM_COLOR</code> field from the shader environment, and return it as the
        fragment color.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">inline</span><span> </span><span class="keyword">def</span><span> </span><span class="declaration-name">fragment</span><span>: </span><span class="type-name">Shader</span><span>[</span><span class="type-name">Env</span><span>, </span><span class="type-name">Unit</span><span>] =
  </span><span class="type-name">Shader</span><span>[</span><span class="type-name">Env</span><span>] { </span><span class="identifier">env</span><span> =&gt;
    </span><span class="identifier">ubo</span><span>[</span><span class="type-name">CustomData</span><span>]

    </span><span class="keyword">def</span><span> </span><span class="declaration-name">fragment</span><span>(</span><span class="identifier">color</span><span>: </span><span class="identifier">vec4</span><span>): </span><span class="identifier">vec4</span><span> =
      </span><span class="identifier">env</span><span>.</span><span class="type-name">CUSTOM_COLOR</span><span>
  }</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Site generated by <a href="https://typelevel.org/Laika/">Laika</a> with the Helium theme.
</footer>


      </main>

    </div>

  </body>

</html>